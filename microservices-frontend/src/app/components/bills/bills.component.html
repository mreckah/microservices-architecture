<div class="container">
  <h2>Bill Details</h2>
  
  <div class="bill-selector">
    <label for="billId">Enter Bill ID:</label>
    <input 
      type="number" 
      id="billId" 
      [(ngModel)]="billId" 
      (change)="onBillIdChange()"
      min="1"
    />
    <button (click)="loadBill()">Load Bill</button>
  </div>

  <div *ngIf="loading" class="loading">
    <p>Loading bill...</p>
  </div>

  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
  </div>

  <div *ngIf="!loading && !error && bill" class="bill-details">
    <div class="bill-header">
      <h3>Bill #{{ bill.id }}</h3>
      <p><strong>Date:</strong> {{ bill.billingDate | date:'medium' }}</p>
    </div>

    <div class="customer-info" *ngIf="bill.customer">
      <h4>Customer Information</h4>
      <p><strong>Name:</strong> {{ bill.customer.name }}</p>
      <p><strong>Email:</strong> {{ bill.customer.email }}</p>
      <p><strong>Customer ID:</strong> {{ bill.customerId }}</p>
    </div>

    <div class="items-section" *ngIf="bill.productItems && bill.productItems.length > 0">
      <h4>Items</h4>
      <table class="items-table">
        <thead>
          <tr>
            <th>Product</th>
            <th>Product ID</th>
            <th>Quantity</th>
            <th>Unit Price</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of bill.productItems">
            <td>{{ item.product?.name || 'N/A' }}</td>
            <td>{{ item.productId }}</td>
            <td>{{ item.quantity }}</td>
            <td>${{ item.unitPrice.toFixed(2) }}</td>
            <td>${{ (item.quantity * item.unitPrice).toFixed(2) }}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="4" class="total-label"><strong>Total Amount:</strong></td>
            <td class="total-amount"><strong>${{ getTotalAmount().toFixed(2) }}</strong></td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
</div>

